(this.webpackJsonpapartmentpostings=this.webpackJsonpapartmentpostings||[]).push([[0],{167:function(e,t,n){},168:function(e,t,n){},185:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},243:function(e,t){},258:function(e,t,n){},259:function(e,t,n){},260:function(e,t,n){},265:function(e,t){},267:function(e,t){},277:function(e,t){},279:function(e,t){},306:function(e,t){},308:function(e,t){},309:function(e,t){},314:function(e,t){},316:function(e,t){},322:function(e,t){},324:function(e,t){},343:function(e,t){},355:function(e,t){},358:function(e,t){},361:function(e,t,n){},362:function(e,t,n){},363:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),s=n.n(a),i=n(155),o=n.n(i),r=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,364)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))},j=n(17),l=n(6),d=(n(167),function(e,t,n){var c=new Date;c.setTime(c.getTime()+24*n*60*60*1e3);var a="expires="+c.toUTCString();document.cookie=e+"="+t+";"+a+";path=/"}),u="user",b=function(e){Object.assign(h,e),d(u,JSON.stringify(h),1)},O=function(){Object.assign(h),d(u,null,-1),window.location.href="/"},m=!1,h={},p=n(2),f=(n(168),n(19)),x=n.n(f),v={development:{api:"http://localhost:3000"},production:{api:"https://webdev-forum-backend.herokuapp.com"}},g=v,N=(n(185),n(77)),S=function(e){return N.unix(e).format("Do MMMM YYYY, hh:mm")},w="50x50c",C="300x300",y="600x450",E=function(e,t){return"https://images.craigslist.org/".concat(e,"_").concat(t,".jpg")},k=function(e){return Object(c.jsxs)(j.b,{className:"post-container",to:{pathname:"/post/"+e.post._id,state:{postId:e.post._id,post:e.post}},children:[Object(c.jsxs)("div",{className:"content",children:[Object(c.jsx)("div",{className:"title",children:e.post.title}),Object(c.jsxs)("div",{className:"left",children:[Object(c.jsx)("div",{className:"date",children:" "}),Object(c.jsxs)("div",{className:"price",children:["Price: $",e.post.price]}),Object(c.jsxs)("div",{className:"bedrooms",children:["BR: ",e.post.bedrooms]}),Object(c.jsxs)("div",{className:"area",children:["Area: ",e.post.area," sqft"]}),"Posted:"," ",S(e.post.date)]})]}),Object(c.jsx)("div",{className:"right",children:Object(c.jsx)("div",{className:"image",style:{backgroundImage:"url(".concat(E(e.post.images[0],C),")")}})})]})};var I=function(e){var t=e.posts.map((function(e,t){return Object(c.jsx)(k,{post:e},e._id)}));return Object(c.jsx)("div",{className:"post-list",children:t})},_=n(49),P=n.n(_),F=n(157),A=n.n(F),B=(n(209),function(e){var t=Object(a.useState)("0"),n=Object(p.a)(t,2),s=n[0],i=n[1],o=Object(a.useState)("999999"),r=Object(p.a)(o,2),j=r[0],l=r[1],d=Object(a.useState)("0"),u=Object(p.a)(d,2),b=u[0],O=u[1],m=Object(a.useState)("0"),h=Object(p.a)(m,2),f=h[0],x=h[1],v=Object(a.useState)("999999"),g=Object(p.a)(v,2),N=g[0],S=g[1],w=Object(a.useState)({}),C=Object(p.a)(w,2),y=C[0],E=C[1];return Object(a.useEffect)((function(){var t={minPrice:s,maxPrice:j,minbedrooms:b,minarea:f,maxarea:N};return t!=y?(E(t),void e.updateFilter(t)):void 0}),[s,j,b,f,N]),Object(c.jsx)("div",{className:"filter",children:Object(c.jsxs)("div",{className:"filter-container",children:[Object(c.jsxs)("span",{children:[Object(c.jsx)("input",{onChange:function(e){return i(e.target.value)},min:"0",type:"number",value:s}),"  ","$ -",Object(c.jsx)("input",{onChange:function(e){return l(e.target.value)},min:"0",type:"number",value:j}),"  ","$","  "]}),Object(c.jsxs)("span",{children:[Object(c.jsx)("input",{onChange:function(e){return O(e.target.value)},min:"0",type:"number",value:b}),"  ","BR","  "]}),Object(c.jsxs)("span",{children:[Object(c.jsx)("input",{onChange:function(e){return x(e.target.value)},min:"0",type:"number",value:f}),"  ","sqft -","  ",Object(c.jsx)("input",{onChange:function(e){return S(e.target.value)},min:"0",type:"number",value:N}),"  ","sqft"]})]})})}),L=(n(210),function(e){var t=Object(a.useState)("date"),n=Object(p.a)(t,2),s=n[0],i=n[1],o=Object(a.useState)(1),r=Object(p.a)(o,2),j=(r[0],r[1]),l=Object(a.useState)("date"),d=Object(p.a)(l,2),u=d[0],b=d[1];return Object(a.useEffect)((function(){return b(s),u!=s?(i(s),j("pricedesc"===s?-1:1),void e.updateSort(s)):void 0}),[s]),Object(c.jsx)("div",{className:"sort",children:Object(c.jsx)("div",{className:"sort-by",children:Object(c.jsxs)("div",{children:["Sort by-",Object(c.jsxs)("select",{value:s,onChange:function(e){return i(e.target.value)},children:[Object(c.jsx)("option",{value:"date",children:"newest"}),Object(c.jsx)("option",{value:"priceasc",children:"price\u2191"}),Object(c.jsx)("option",{value:"pricedesc",children:"price\u2193"})]})]})})})}),M=function(e){var t=Object(a.useState)([]),n=Object(p.a)(t,2),i=n[0],o=n[1],r=Object(a.useState)(0),j=Object(p.a)(r,2),l=j[0],d=j[1],u=Object(a.useState)(!1),b=Object(p.a)(u,2),O=b[0],m=b[1],h=Object(a.useState)(0),f=Object(p.a)(h,2),v=f[0],N=f[1],S=Object(a.useState)({}),w=Object(p.a)(S,2),C=w[0],y=w[1],E=Object(a.useState)({}),k=Object(p.a)(E,2),_=k[0],F=k[1];var M=function(){(function(e,t,n){var c=encodeURIComponent(JSON.stringify(e)),a=encodeURIComponent(t);return x.a.get("".concat(g.production.api,"/posts/all?page=").concat(n,"&filter=").concat(c,"&sort=").concat(a))})(C,_,v).then((function(e){o(e.data.Data),d(e.data.Count)})).catch((function(e){console.error("Failed to get all posts",e)}))};return Object(a.useEffect)(M,[C,_,v]),Object(a.useEffect)((function(){m(!1),m(!0)}),[M]),Object(a.useEffect)((function(){N(0)}),[C,_]),Object(c.jsxs)("div",{className:"feed",children:[Object(c.jsxs)("div",{className:"top",children:[Object(c.jsx)(B,{updateFilter:y}),Object(c.jsx)(L,{updateSort:F})]}),Object(c.jsx)("div",{className:"container",children:O?Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(A.a,{previousLabel:"\u2190 Previous",nextLabel:"Next \u2192",pageCount:Math.ceil(l/10),onPageChange:function(e){var t=e.selected;N(t)},containerClassName:"pagination",previousLinkClassName:"pagination__link",nextLinkClassName:"pagination__link",disabledClassName:"pagination__link--disabled",activeClassName:"pagination__link--active"}),Object(c.jsx)(I,{posts:i})]}):Object(c.jsx)(P.a,{type:"TailSpin",color:"#551A8B",height:100,width:100,className:"loader"})})]})},R=n(161),T=(n(211),n(212),n(158)),U=n.n(T),D=n(159),H=n.n(D),J=(n(258),function(e){return Object(c.jsxs)("span",{className:"comment-item",children:[Object(c.jsx)("div",{className:"comment",children:e.comment.message}),Object(c.jsxs)("div",{className:"date",children:["Added: ",(t=e.comment.created,N(t).fromNow())]})]});var t});var q=function(e){var t=e.comments.map((function(e,t){return Object(c.jsx)(J,{comment:e},e._id||t)}));return Object(c.jsx)("div",{className:"comment-list",children:t})},Y=(n(259),Object(l.g)((function(e){var t=Object(a.useState)(""),n=Object(p.a)(t,2),s=n[0],i=n[1],o=Object(a.useState)(void 0),r=Object(p.a)(o,2),j=r[0],l=r[1],d=Object(a.useState)(void 0),u=Object(p.a)(d,2),b=u[0],O=u[1];Object(a.useEffect)((function(){O(e.postId)}),[h]);return Object(c.jsxs)("div",{id:e.id,className:"new-comment",children:[Object(c.jsx)("h2",{children:"Add note:"}),Object(c.jsx)("textarea",{id:"comment",alt:"comment",name:"comment","aria-label":"New comment",onChange:function(e){return i(e.target.value)}}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{"aria-label":"Add comment to thread",onClick:function(){if(s&&s.length>0){var t={userId:h._id,username:h.username,postId:b,message:s};console.log("payload",t),function(e){return x.a.post(g.production.api+"/comments/add",e,{withCredentials:!0,timeout:1e4})}(t).then((function(t){if(200===t.status){var n=t.data,c={userId:n._id,message:n.message,created:n.created,user:[{name:h.name,id:h.id}]};e.success(c),i(""),l("")}})).catch((function(e){console.error(e)}))}else l("Error: empty note")},children:"Submit"}),Object(c.jsx)("div",{className:"error",children:j||""})]})}))),$=function(e){var t=Object(a.useState)(),n=Object(p.a)(t,2),i=n[0],o=n[1],r=Object(a.useState)(void 0),l=Object(p.a)(r,2),d=l[0],u=l[1],b=Object(a.useState)(!1),O=Object(p.a)(b,2),m=O[0],f=O[1],v=Object(a.useState)(null),N=Object(p.a)(v,2),C=N[0],k=N[1],I=Object(a.useState)(!1),_=Object(p.a)(I,2),F=(_[0],_[1],Object(a.useState)([])),A=Object(p.a)(F,2),B=A[0],L=A[1];Object(a.useEffect)((function(){e.location&&e.location.state&&e.location.state.postId?o(e.location.state.postId):e.match&&e.match.params&&e.match.params.postId?o(e.match.params.postId):setRedirectToHome(!0)}),[e.location,e.match]);var M=function(){i&&!d&&function(e){return x.a.get(g.production.api+"/posts/one?id="+e)}(i).then((function(e){u(e.data),f(!0)})).catch((function(e){console.error("Failed to get all posts",e)}))};Object(a.useEffect)(M,[i,d]);Object(a.useEffect)((function(){var e,t;i&&h._id&&(e=i,t=h._id,x.a.get(g.production.api+"/comments/all?id=".concat(e,"&user=").concat(t),{withCredentials:!0,timeout:1e4})).then((function(e){200===e.status?e.data&&L(e.data):202===e.status&&console.error("error",e.data)})).catch((function(e){console.error(e)}))}),[e.user,i]);Object(a.useEffect)((function(){d&&d.images&&k(d.images.map((function(e){return{original:"".concat(E(e,y)),thumbnail:"".concat(E(e,w))}})))}),[d]);return Object(c.jsx)("div",{className:"post",children:Object(c.jsx)("div",{className:"container",children:m?Object(c.jsxs)("div",{className:"post",children:[Object(c.jsxs)("div",{className:"content",children:[Object(c.jsx)("div",{className:"title",children:d.title}),Object(c.jsx)("hr",{}),Object(c.jsx)("div",{className:"gallery",children:Object(c.jsx)(U.a,{items:C,showPlayButton:!1,showFullscreenButton:!1,showIndex:!1,additionalClass:"image-gallery"})}),Object(c.jsx)("hr",{}),Object(c.jsxs)("div",{className:"extra",children:[Object(c.jsxs)("div",{className:"date",children:[Object(c.jsx)("b",{children:"Date Posted: "}),S(d.date)]}),Object(c.jsxs)("div",{className:"price",children:[Object(c.jsx)("b",{children:"Price: "}),"$",d.price]}),Object(c.jsxs)("div",{className:"bedrooms",children:[Object(c.jsx)("b",{children:"BR: "}),d.bedrooms]}),Object(c.jsxs)("div",{className:"area",children:[Object(c.jsx)("b",{children:"Area: "}),d.area," sqft"]}),Object(c.jsxs)("div",{className:"address",children:[Object(c.jsx)("b",{children:"Address: "}),d.mapaddress]})]}),Object(c.jsxs)("div",{className:"neighborhood",children:[Object(c.jsx)("b",{children:"Neighborhood: "}),d.neighborhood.join(", ")]}),Object(c.jsx)("hr",{}),Object(c.jsx)("div",{className:"body",children:H()(d.body)})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("hr",{}),Object(c.jsx)("h2",{children:"Notes: "}),Object(c.jsx)("div",{className:"comments",children:h._id?Object(c.jsx)(s.a.Fragment,{children:Object(c.jsxs)("div",{className:"list",children:[B&&B.length&&B.length>0?Object(c.jsx)(q,{comments:B}):Object(c.jsx)("div",{children:" No comments found for this post "}),Object(c.jsx)(Y,{success:function(e){console.log("Added comment, ",e),L([].concat(Object(R.a)(B),[e]))},postId:d._id})]})}):Object(c.jsxs)("div",{id:e.id,className:"login",children:["Please sign-in/sign-up to make notes. ",Object(c.jsx)("br",{}),Object(c.jsxs)(j.b,{to:{pathname:"/login",state:{from:e.location}},children:[Object(c.jsx)("br",{})," To sign-in/up"]})]})})]})]}):Object(c.jsx)(P.a,{type:"TailSpin",color:"#551A8B",height:100,width:100,className:"loader"})})})},z=function(){return Object(c.jsx)("h3",{children:"Url not found."})},G=(n(260),n(50)),K=n.n(G),Q=function(e){var t=Object(a.useState)(""),n=Object(p.a)(t,2),s=n[0],i=n[1],o=Object(a.useState)(""),r=Object(p.a)(o,2),j=r[0],l=r[1],d=Object(a.useState)(void 0),u=Object(p.a)(d,2),b=u[0],O=u[1];return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{onClick:e.changeMode,className:"top-right-corner",children:"Sign-up"}),Object(c.jsx)("h1",{children:"Sign-in"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(c.jsx)("input",{id:"username",alt:"username",autoFocus:!0,name:"username",placeholder:"Enter your username",type:"text",onChange:function(e){return i(e.target.value)}})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(c.jsx)("input",{id:"password",alt:"password",name:"password",placeholder:"Enter your Password",type:"password",onChange:function(e){return t=e.target.value,l(K()(t).toString());var t}})]}),Object(c.jsx)("button",{"aria-label":"Sign into forum",onClick:function(){""!==s&&""!==j?function(e){return x.a.post(g.production.api+"/auth/signin",e,{withCredentials:!0,timeout:1e4})}({username:s,password:j}).then((function(t){200===t.status?e.success(t.data):202===t.status&&O(t.data)})).catch((function(e){console.error(e)})):O("Please fill in all fields")},children:"Sign-in"}),Object(c.jsx)("div",{className:"error",children:b||""})]})},V=function(e){var t=Object(a.useState)(""),n=Object(p.a)(t,2),s=n[0],i=n[1],o=Object(a.useState)(""),r=Object(p.a)(o,2),j=r[0],l=r[1],d=Object(a.useState)(void 0),u=Object(p.a)(d,2),b=u[0],O=u[1];return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{onClick:e.changeMode,className:"top-right-corner",children:"Sign-in"}),Object(c.jsx)("h1",{children:"Sign-up"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"name",children:"Username: "}),Object(c.jsx)("input",{id:"username",alt:"username",autoFocus:!0,name:"username",placeholder:"Enter your username",type:"text",onChange:function(e){return i(e.target.value)}})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(c.jsx)("input",{id:"password",alt:"password",name:"password",placeholder:"Enter your Password",type:"password",onChange:function(e){return t=e.target.value,l(K()(t).toString());var t}})]}),Object(c.jsx)("button",{"aria-label":"Sign up to forum",onClick:function(){""!==s&&""!==j?function(e){return x.a.post(g.production.api+"/auth/signup",e,{withCredentials:!0,timeout:1e4})}({username:s,password:j}).then((function(t){200===t.status?e.success(t.data):202===t.status&&O(t.data)})).catch((function(e){console.error(e)})):O("Please fill in all fields")},children:"Sign-up"}),Object(c.jsx)("div",{className:"error",children:b||""})]})},W=Object(l.g)((function(e){var t=Object(a.useState)(!0),n=Object(p.a)(t,2),s=n[0],i=n[1],o=Object(a.useState)(!1),r=Object(p.a)(o,2),j=r[0],d=r[1],u=(e.location.state||{from:{pathname:"/"}}).from,O=function(e){b(e),d(!0)},m=function(){i(!s)};return!0===j?Object(c.jsx)(l.a,{to:u}):Object(c.jsx)("div",{className:"auth-container",children:s?Object(c.jsx)(Q,{changeMode:m,success:O}):Object(c.jsx)(V,{changeMode:m,success:O})})})),X=(n(361),Object(l.g)((function(e){return Object(c.jsxs)("header",{role:"banner",className:"active",id:"scroll-header",children:[Object(c.jsx)("nav",{role:"navigation",className:"menu",children:Object(c.jsx)(j.b,{"aria-label":"Navigate to Home page",to:"/",children:"Home"})}),Object(c.jsx)("div",{className:"login",children:h._id?Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"user",children:["Hello ",h.username]}),Object(c.jsx)("button",{onClick:O,"aria-label":"Logout button",children:"Logout"})]}):Object(c.jsx)(j.b,{to:{pathname:"/login",state:{from:e.location}},children:"Sign-In/Sign-up"})})]})}))),Z=n(160),ee=(n(362),function(){var e=Object(a.useState)(0),t=Object(p.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(0),o=Object(p.a)(i,2),r=o[0],j=o[1],l=Object(a.useState)(""),d=Object(p.a)(l,2),u=d[0],b=d[1],O=function(e){s(e.target.innerHeight)};return Object(a.useEffect)((function(){s(window.innerHeight),window.addEventListener("resize",O);var e=new ResizeObserver((function(e){var t,n=Object(Z.a)(e);try{for(n.s();!(t=n.n()).done;){var c=t.value.contentRect;j(c.height+c.top)}}catch(a){n.e(a)}finally{n.f()}})),t=document.getElementById("craigslist-body");return e.observe(t),function(){window.removeEventListener("resize",O),e.unobserve(t)}}),[]),Object(a.useEffect)((function(){b(n>r?"bottom":"")}),[n,r]),Object(c.jsx)("footer",{role:"contentinfo",className:u,children:Object(c.jsx)("div",{className:"copyright",children:"Copyright \xa9 2020, David Pan"})})});!function(){if(!m){var e=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),c=0;c<n.length;c++){for(var a=n[c];" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return""}(u);if(e){try{e=JSON.parse(e)}catch(t){console.log("Failed to load cached user")}b(e)}m=!0}}(),o.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsxs)(j.a,{children:[Object(c.jsx)(X,{}),Object(c.jsx)("div",{role:"main",id:"craigslist-body",className:"craigslist-body",children:Object(c.jsxs)(l.d,{children:[Object(c.jsx)(l.b,{exact:!0,path:"/",component:M}),Object(c.jsx)(l.b,{path:"/post/:postId",component:$}),Object(c.jsx)(l.b,{path:"/login",component:W}),Object(c.jsx)(l.b,{path:"*",component:z})]})}),Object(c.jsx)(ee,{})]})}),document.getElementById("root")),r()}},[[363,1,2]]]);
//# sourceMappingURL=main.59e322bd.chunk.js.map